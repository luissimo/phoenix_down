<%= provide(:title, 'Elo boost') %>

<div class="row">
  <div class="container">
    <div class="col-md-7">
      <section class="card box-typical">
        <div class="card-block">
          <h5 class="with-border">Elo Boost</h5>
           <div class="col-md-12 center-block">
            <div class="row">
              <section class="tabs-section">
                <div class="tabs-section-nav">
                  <div class="tbl">
                    <ul class="nav" role="tablist" id="payment_tabs">
                      <li class="nav-item">
                        <a class="nav-link active" href="#tabs-2-tab-1" role="tab" data-toggle="tab">
									<span class="nav-link-in">
										Division boost
									</span>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="#tabs-2-tab-2" role="tab" data-toggle="tab">
									<span class="nav-link-in">
										Win boost
									</span>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="#tabs-2-tab-3" role="tab" data-toggle="tab">
									<span class="nav-link-in">
										Budget boost
									</span>
                        </a>
                      </li>
                    </ul>
                  </div>
                </div><!--.tabs-section-nav-->

                <div class="tab-content">
                  <div role="tabpanel" class="tab-pane fade in active" id="tabs-2-tab-1">
                    <h5 class="with-border m-t-0">Division boost</h5>
                    <div class="col-md-5">
                      <div class="row">
                        <div class="form-group float-left">
                          <label class="label label-success">Choose your current division</label>
                          <%= image_tag('bronze_5.png', size: '180x180') %>
                          <select class="select2" id="current_division_div">
                            <optgroup label="Bronze division">
                              <option value="0">Bronze V</option>
                              <option value="10">Bronze IV</option>
                              <option value="25">Bronze III</option>
                              <option value="40.2">Bronze II</option>
                              <option value="55.4">Bronze I</option>
                            </optgroup>
                            <optgroup label="Silver division">
                              <option value="70.6">Silver V</option>
                              <option value="90.55">Silver IV</option>
                              <option value="111.45">Silver III</option>
                              <option value="132.35">Silver II</option>
                              <option value="153.25">Silver I</option>
                            </optgroup>
                            <optgroup label="Gold division">
                              <option value="177.95">Gold V</option>
                              <option value="203.6">Gold IV</option>
                              <option value="230.2">Gold III</option>
                              <option value="257.75">Gold II</option>
                              <option value="287.2">Gold I</option>
                            </optgroup>
                            <optgroup label="Platinum division">
                              <option value="322.35">Platinum V</option>
                              <option value="360.35">Platinum IV</option>
                              <option value="403.1">Platinum III</option>
                              <option value="462.95">Platinum II</option>
                              <option value="522.8">Platinum I</option>
                            </optgroup>
                            <optgroup label="Diamond division">
                              <option value="598.8">Diamond V</option>
                              <option value="693.8">Diamond IV</option>
                              <option value="807.8">Diamond III</option>
                              <option value="940.8">Diamond II</option>
                              <option value="1130.8">Diamond I</option>
                            </optgroup>
                            <optgroup label="Master division">
                              <option value="1630.8">Master</option>
                            </optgroup>
                            <optgroup label="Challenger division">
                              <option value="4999">Challenger</option>
                            </optgroup>
                          </select>
                        </div> <!-- end form group -->
                      </div>
                    </div>

                    <div class="row">
                      <div class="form-group">
                        <div class="col-md-5 float-right">
                          <div class="row">
                            <label class="label label-success">Choose your desired division</label>
                            <%= image_tag('platinum_2.png', size: '180x180', class: 'float-left') %>
                            <select class="select2" id="desired_division_div" onkeyup="this.value = minmax(15, 5000)" onchange="divCalculate(this.value)" autofocus>
                              <optgroup label="Challenger division">
                                <option value="4999">Challenger</option>
                              </optgroup>
                              <optgroup label="Master division">
                                <option value="1630.8">Master</option>
                              </optgroup>
                              <optgroup label="Diamond division">
                                <option value="1130.8">Diamond I</option>
                                <option value="940.8">Diamond II</option>
                                <option value="807.8">Diamond III</option>
                                <option value="693.8">Diamond IV</option>
                                <option value="598.8">Diamond V</option>
                              </optgroup>
                              <optgroup label="Platinum division">
                                <option value="522.8">Platinum I</option>
                                <option value="462.95">Platinum II</option>
                                <option value="403.1">Platinum III</option>
                                <option value="360.35">Platinum IV</option>
                                <option value="322.35">Platinum V</option>
                              </optgroup>
                              <optgroup label="Gold division">
                                <option value="287.2">Gold I</option>
                                <option value="257.75">Gold II</option>
                                <option value="230.2">Gold III</option>
                                <option value="203.6">Gold IV</option>
                                <option value="177.95">Gold V</option>
                              </optgroup>
                              <optgroup label="Silver division">
                                <option value="153.25">Silver I</option>
                                <option value="132.35">Silver II</option>
                                <option value="111.45">Silver III</option>
                                <option value="90.55">Silver IV</option>
                                <option value="70.6">Silver V</option>
                              </optgroup>
                              <optgroup label="Bronze division">
                                <option value="55.4">Bronze I</option>
                                <option value="40.2">Bronze II</option>
                                <option value="25">Bronze III</option>
                                <option value="10">Bronze IV</option>
                                <option value="0">Bronze V</option>
                              </optgroup>
                            </select>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div><!--.tab-pane-->

                  <div role="tabpanel" class="tab-pane fade" id="tabs-2-tab-2">
                    <h5 class="with-border">Win boost</h5>
                    <div class="row">
                      <div class="col-md-6">
                        <div class="form-group">
                          <label class="label label-success">Choose your current division</label>
                          <%= image_tag('bronze_5.png', size: '180x180') %>
                          <select class="select2" id="current_division_win" onchange="winCalculate().reload()" >
                            <optgroup label="Bronze division">
                              <option value="4.1" >Bronze V</option>
                              <option value="4">Bronze IV</option>
                              <option value="3.9">Bronze III</option>
                              <option value="3.8">Bronze II</option>
                              <option value="3.75">Bronze I</option>
                            </optgroup>
                            <optgroup label="Silver division">
                              <option value="3.7">Silver V</option>
                              <option value="3.65">Silver IV</option>
                              <option value="3.6">Silver III</option>
                              <option value="3.5">Silver II</option>
                              <option value="3.5">Silver I</option>
                            </optgroup>
                            <optgroup label="Gold division">
                              <option value="3.5">Gold V</option>
                              <option value="3.3">Gold IV</option>
                              <option value="3.1">Gold III</option>
                              <option value="2.9">Gold II</option>
                              <option value="2.7">Gold I</option>
                            </optgroup>
                            <optgroup label="Platinum division">
                              <option value="2.5">Platinum V</option>
                              <option value="2.3">Platinum IV</option>
                              <option value="2.1">Platinum III</option>
                              <option value="1.9">Platinum II</option>
                              <option value="1.7">Platinum I</option>
                            </optgroup>
                            <optgroup label="Diamond division">
                              <option value="1.6">Diamond V</option>
                              <option value="1.5">Diamond IV</option>
                              <option value="1.3">Diamond III</option>
                              <option value="1.1">Diamond II</option>
                              <option value="0.9">Diamond I</option>
                            </optgroup>
                            <optgroup label="Master division">
                              <option value="0.7">Master</option>
                            </optgroup>
                            <optgroup label="Challenger division">
                              <option value="0.5">Challenger</option>
                            </optgroup>
                          </select>
                        </div>
                      </div>

                      <div class="col-md-6">
                        <div class="form-group">
                          <label class="label label-success"> How many wins would you like?</label><br/><br/>
                          <div class="col-md-8 text-center"><br/><br/>
                            <h1 id="amount_of_wins" > 0 </h1><br/><br/>
                          </div>
                          <div class="col-md-12">
                            <input type="text" onkeyup="this.value=this.value.replace(/[^\d]/,'')"
                                   id="demo3" value="1" min="1" max="9" maxlength="1" step="1" name="demo3" oninput="winCalculate(this.value)" onchange="winCalculate(this.value)">
                          </div>
                        </div>
                      </div>
                    </div>   <!-- end row -->
                  </div><!--.tab-pane-->
                  <div role="tabpanel" class="tab-pane fade" id="tabs-2-tab-3">
                    <div class="container">
                      <div class="col-md-12">
                        <section class="card box-typical">
                          <div class="card-block">
                            <h5 class="with-border">Budget boost</h5>
                            <div class="col-md-12 center-block">
                              <div class="row">
                                <div class="form-group text-center">
                                  <label class="label label-success">Choose your budget</label><br/><br/>
                                  <div class="input-group-addon">€</div>
                                  <input type="number" min="10" maxlength="7" step="10"
                                         class="form-control" id="input-budget" placeholder="Amount" onkeyup="this.value=this.value.replace(/[^\d]/,'')"
                                         onchange="budCalculate(this.value)">
                                  <div class="input-group-addon">.00</div>
                                </div> <!-- end form group -->
                              </div>
                            </div>
                            <div class="row">
                              <div class="row"></div>
                            </div>
                          </div>
                        </section>
                      </div>
                    </div>
                  </div><!--.tab-pane-->
                </div><!--.tab-content-->
              </section><!--.tabs-section-->
            </div>
           </div>
          <div class="row">
            <div class="row"></div>
          </div>
        </div>
      </section
    </div>
  </div>


  <%= render 'shared/payments' %>

</div>


<script>
  $(document).ready(function(){
    $("input[name='demo3']").TouchSpin();
  });
</script>
<script>
  function winCalculate(wins) {
    var division_value = $('select[id=current_division_win]').val();
    var division_text = $("#current_division_win option:selected").html();
    cost_eur.innerHTML = "€"+(wins * division_value).toFixed(2);
    cost_usd.innerHTML = "$"+((wins * division_value) * 1.13 ).toFixed(2);
    amount_of_wins.innerHTML = wins;
    product_type.innerHTML = "<strong class='bg-info'>Boost type:</strong> Win boost";
    product1.innerHTML = "<strong class='bg-info'>Current rank</strong> " + division_text;
    product2.innerHTML = "<strong class='bg-info'>wins</strong> " + wins  ;
  }
  function budCalculate(budget_amount) {
    var budget = 0;
    console.log(typeof budget_amount);
    budget = parseFloat(budget_amount);
    cost_eur.innerHTML = "€"+(budget).toFixed(2);
    cost_usd.innerHTML = "$"+(budget * 1.13 ).toFixed(2);
    product_type.innerHTML = "<strong class='bg-info'>Boost type:</strong> Budget boost";
    product1.innerHTML = "<strong class='bg-info'>Chosen budget:</strong> €" + (budget).toFixed(2);
    product2.innerHTML = "<strong class='bg-info'>Chosen budget:</strong> $" + (budget * 1.13).toFixed(2);
    return budget;
  }

  function divCalculate(desired_division) {
    var current_division = $('select[id=current_division_div]').val();
    var current_division_text = $("#current_division_div option:selected").text();
    var desired_division_text = $("#desired_division_div option:selected").text();
    cost_eur.innerHTML = "€" + calculateTotalAmt(desired_division,'euro');
    cost_usd.innerHTML = "$" + calculateTotalAmt(desired_division,'usd');
    product_type.innerHTML = "<strong class='bg-info'>Boost type:</strong> Division boost";
    product1.innerHTML = "<strong class='bg-info'>Current division</strong> " + current_division_text;
    product2.innerHTML = "<strong class='bg-info'>Desired division</strong> " + desired_division_text;
  }

  function calculateTotalAmt(desired_division, currencyType) {
    var totalAmt;
    var current_division = $('select[id=current_division_div]').val();
    if(currencyType == 'euro') {
      totalAmt = (desired_division - current_division).toFixed(2);
    } else if(currencyType == 'usd') {
      totalAmt = ((desired_division - current_division) * 1.13 ).toFixed(2);
    }
    if(totalAmt != undefined && totalAmt < 10)
      totalAmt = 0;
    return totalAmt;
  }
</script>
