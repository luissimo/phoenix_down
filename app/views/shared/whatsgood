class ContactsController < ApplicationController

  def new
    @contact = Contact.new
  end

  def create
    @contact = Contact.new(params[:contact])
    @contact.request = request
    if @contact.deliver
      flash.now[:notice] = "Thank you very much, we will contact you on your email with further instructions"
    else
      flash.now[:error]  = "Something went wrong, please try again."
      render :new
    end
  end

  def contact_us_new
    @contact_us_new = Contact.new
  end
  def contact_us_create
    @contact_us_new = Contact.new(params[:contact])
    @contact_us_new.request = request
    if @contact_us_new.deliver
      flash.now[:notice] = "Thank you very much, we will contact you as soon as possible!"
    else
      flash.now[:error]  = "Something went wrong, please try again."
      render :new
    end
  end

end

////////

class Contact < MailForm::Base
  attribute :paypal_id,                      :validate => true
  attribute :email,                          :validate => /\A([\w\.%\+\-]+)@([\w\-]+\.)+([\w]{2,})\z/i
  attribute :message
  attribute :subject,                        :validate => true
  attribute :account_name,                   :validate => true
  attribute :account_password,               :validate => true
  attribute :account_password_confirmation,  :validate => true
  attribute :nickname,                       :captcha  => true

  # Declare the e-mail headers. It accepts anything the mail method
  # in ActionMailer accepts.
  def headers
    {
        :subject => "Boost form filled in",
        :to => "afg.010@hotmail.com, khijbar@gmail.com",
        :from => %("#{account_name}", "#{paypal_id}" <#{email}>)
    }
  end
end



//////// CONTACT PAGE //////////


<%= provide(:title, 'Contact') %>

<section class="box-typical contacts-page">
  <header class="box-typical-header box-typical-header-bordered">
    <div class="tbl-row">
      <div class="tbl-cell tbl-cell-title">
        <h1>Contact us</h1>
        <ul class="contacts-tabs" role="tablist">
          <li class="nav-item">
            <a href="#tab-contact-1" role="tab" data-toggle="tab" class="active">Europe</a>
          </li>
        </ul>
      </div>
      <div class="tbl-cell tbl-cell-actions">
        <button type="button" class="action-btn action-btn-expand">
          <i class="font-icon font-icon-expand"></i>
        </button>
      </div>
    </div>
  </header>

  <div class="tab-content">
    <div role="tabpanel" class="clearfix tab-pane active" id="tab-contact-1">
      <div class="contacts-page-col-left">
        <div class="contacts-page-col-left-in">
          <div id="map_canvas" class="map"></div>
        </div><!--.contacts-page-col-left-in-->
      </div><!--.contacts-page-col-left-->
      <div class="contacts-page-col-right">
        <section class="contacts-page-section">
          <header class="box-typical-header-sm">Connect</header>
          <a href="#" class="contact">
            <i class="font-icon font-icon-facebook"></i>
          </a>
          <a href="#" class="contact">
            <i class="font-icon font-icon-google-plus"></i>
          </a>
        </section>

        <form class="contacts-page-section">
          <%= simple_form_for @contact_us_new do |f| %>
              <div class="form-group">
                <%= f.input :email, :required => true, class: 'form-control' %>
              </div>
              <div class="form-group">
                <%= f.input :subject, :required => true, class: 'form-control' %>
              </div>
              <div class="form-group">
                <%= f.input :message, :as => :text, :required => true, class: 'form-control' %>
              </div>
              <div class="actions">
                <%= f.button :submit, 'Send', class: "btn btn-rounded" %>
              </div>
          <% end %>
        </form>
        <section class="contacts-page-section">
          <header class="box-typical-header-sm">Other way</header>
          <p class="contact-other"><i class="font-icon font-icon-mail"></i>info@eloboost.io</p>
        </section>
      </div><!--.contacts-page-col-right-->
    </div><!--.tab-pane-->
  </div><!--.tab-content-->
</section><!--.box-typical-->

<script src="http://maps.googleapis.com/maps/api/js?v=3&sensor=false"></script>
<script src="http://maps.googleapis.com/maps/api/js?v=3&sensor=false"></script>
<script src="js/lib/google-maps/infobox.js"></script>
<script src="js/lib/google-maps/google-maps-init.js"></script>